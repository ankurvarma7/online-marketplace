â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  GCP Marketplace Deployment & Evaluation Script               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[0;34m[INFO][0m Checking prerequisites...
[0;32m[SUCCESS][0m Prerequisites check passed
[0;34m[INFO][0m DEPLOYMENT PHASE
================================================================
[0;34m[INFO][0m Creating network infrastructure...
[0;34m[INFO][0m Creating VPC network: marketplace-network
[1;33m[WARNING][0m Network marketplace-network already exists, skipping creation
[0;34m[INFO][0m Creating subnet: marketplace-subnet
[1;33m[WARNING][0m Subnet marketplace-subnet already exists, skipping creation
[0;34m[INFO][0m Creating firewall rules...
[1;33m[WARNING][0m Firewall rule marketplace-internal already exists
[1;33m[WARNING][0m Firewall rule marketplace-ssh already exists
[1;33m[WARNING][0m Firewall rule marketplace-external already exists
[0;34m[INFO][0m Creating startup script...
[0;32m[SUCCESS][0m Startup script created at /tmp/startup-script.sh
[0;34m[INFO][0m Creating VM instances...
[0;34m[INFO][0m Creating instance: customer-db (IP: 10.0.0.2)
[1;33m[WARNING][0m Instance customer-db already exists, skipping creation
[0;34m[INFO][0m Creating instance: product-db (IP: 10.0.0.3)
[1;33m[WARNING][0m Instance product-db already exists, skipping creation
[0;34m[INFO][0m Creating instance: seller-server (IP: 10.0.0.4)
[1;33m[WARNING][0m Instance seller-server already exists, skipping creation
[0;34m[INFO][0m Creating instance: buyer-server (IP: 10.0.0.5)
[1;33m[WARNING][0m Instance buyer-server already exists, skipping creation
[0;34m[INFO][0m Creating instance: seller-client (IP: 10.0.0.6)
[1;33m[WARNING][0m Instance seller-client already exists, skipping creation
[0;34m[INFO][0m Creating instance: buyer-client (IP: 10.0.0.7)
[1;33m[WARNING][0m Instance buyer-client already exists, skipping creation
[0;34m[INFO][0m Creating instance: evaluator (IP: 10.0.0.8)
[1;33m[WARNING][0m Instance evaluator already exists, skipping creation
[0;32m[SUCCESS][0m All instances created (or already exist)
[0;34m[INFO][0m Waiting for instances to reach RUNNING state...
[0;32m[SUCCESS][0m Instance customer-db is RUNNING
[0;32m[SUCCESS][0m Instance product-db is RUNNING
[0;32m[SUCCESS][0m Instance seller-server is RUNNING
[0;32m[SUCCESS][0m Instance buyer-server is RUNNING
[0;32m[SUCCESS][0m Instance seller-client is RUNNING
[0;32m[SUCCESS][0m Instance buyer-client is RUNNING
[0;32m[SUCCESS][0m Instance evaluator is RUNNING
[0;34m[INFO][0m Creating tarball of local code...
[0;34m[INFO][0m Transferring code to all instances...
[0;34m[INFO][0m Transferring code to customer-db...
SSH ready
Read from remote host 34.27.98.246: Connection reset by peer
client_loop: send disconnect: Broken pipe
lost connection
ERROR: (gcloud.compute.scp) [/usr/bin/scp] exited with return code [1].
[1;33m[WARNING][0m Transfer to customer-db may have failed, will retry...
mv: cannot move '/tmp/marketplace.tar.gz' to '/home/appuser/': Not a directory
[1;33m[WARNING][0m Permission setup for customer-db may have failed
[0;32m[SUCCESS][0m Code transferred to customer-db
[0;34m[INFO][0m Transferring code to product-db...
SSH ready
mv: cannot move '/tmp/marketplace.tar.gz' to '/home/appuser/': Not a directory
[1;33m[WARNING][0m Permission setup for product-db may have failed
[0;32m[SUCCESS][0m Code transferred to product-db
[0;34m[INFO][0m Transferring code to seller-server...
SSH ready
Read from remote host 34.132.84.245: Connection reset by peer
client_loop: send disconnect: Broken pipe
lost connection
ERROR: (gcloud.compute.scp) [/usr/bin/scp] exited with return code [1].
[1;33m[WARNING][0m Transfer to seller-server may have failed, will retry...
mv: cannot move '/tmp/marketplace.tar.gz' to '/home/appuser/': Not a directory
[1;33m[WARNING][0m Permission setup for seller-server may have failed
[0;32m[SUCCESS][0m Code transferred to seller-server
[0;34m[INFO][0m Transferring code to buyer-server...
SSH ready
Read from remote host 34.42.60.243: Connection reset by peer
client_loop: send disconnect: Broken pipe
lost connection
ERROR: (gcloud.compute.scp) [/usr/bin/scp] exited with return code [1].
[1;33m[WARNING][0m Transfer to buyer-server may have failed, will retry...
mv: cannot move '/tmp/marketplace.tar.gz' to '/home/appuser/': Not a directory
[1;33m[WARNING][0m Permission setup for buyer-server may have failed
[0;32m[SUCCESS][0m Code transferred to buyer-server
[0;34m[INFO][0m Transferring code to seller-client...
SSH ready
Connection to 136.111.175.72 closed by remote host.
client_loop: send disconnect: Broken pipe
/usr/bin/scp: Connection closed
ERROR: (gcloud.compute.scp) [/usr/bin/scp] exited with return code [255].
[1;33m[WARNING][0m Transfer to seller-client may have failed, will retry...
mv: cannot move '/tmp/marketplace.tar.gz' to '/home/appuser/': Not a directory
[1;33m[WARNING][0m Permission setup for seller-client may have failed
[0;32m[SUCCESS][0m Code transferred to seller-client
[0;34m[INFO][0m Transferring code to buyer-client...
SSH ready
Read from remote host 34.30.109.245: Connection reset by peer
client_loop: send disconnect: Broken pipe
lost connection
ERROR: (gcloud.compute.scp) [/usr/bin/scp] exited with return code [1].
[1;33m[WARNING][0m Transfer to buyer-client may have failed, will retry...
mv: cannot move '/tmp/marketplace.tar.gz' to '/home/appuser/': Not a directory
[1;33m[WARNING][0m Permission setup for buyer-client may have failed
[0;32m[SUCCESS][0m Code transferred to buyer-client
[0;34m[INFO][0m Transferring code to evaluator...
SSH ready
Connection to 34.69.103.20 closed by remote host.
client_loop: send disconnect: Broken pipe
/usr/bin/scp: Connection closed
ERROR: (gcloud.compute.scp) [/usr/bin/scp] exited with return code [255].
[1;33m[WARNING][0m Transfer to evaluator may have failed, will retry...
mv: cannot move '/tmp/marketplace.tar.gz' to '/home/appuser/': Not a directory
[1;33m[WARNING][0m Permission setup for evaluator may have failed
[0;32m[SUCCESS][0m Code transferred to evaluator
[0;32m[SUCCESS][0m Code transferred to all instances!
[0;34m[INFO][0m Waiting for builds to complete (this may take 5-10 minutes)...
[0;34m[INFO][0m Waiting for instances to build (5-10 minutes)...
[0;34m[INFO][0m Getting instance information...

=== INSTANCE INFORMATION ===
NAME           STATUS   INTERNAL_IP  EXTERNAL_IP
buyer-client   RUNNING  10.0.0.7     34.30.109.245
buyer-server   RUNNING  10.0.0.5     34.42.60.243
customer-db    RUNNING  10.0.0.2     34.27.98.246
evaluator      RUNNING  10.0.0.8     34.69.103.20
product-db     RUNNING  10.0.0.3     34.59.114.66
seller-client  RUNNING  10.0.0.6     136.111.175.72
seller-server  RUNNING  10.0.0.4     34.132.84.245

[0;34m[INFO][0m Waiting for services to start on instances...
........................................................